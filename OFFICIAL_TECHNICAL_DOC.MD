AccessibilityService

bookmark_border
Kotlin |Java
public abstract class AccessibilityService
extends Service

java.lang.Object
   ↳	android.content.Context
 	   ↳	android.content.ContextWrapper
 	 	   ↳	android.app.Service
 	 	 	   ↳	android.accessibilityservice.AccessibilityService

Accessibility services should only be used to assist users with disabilities in using Android devices and apps. They run in the background and receive callbacks by the system when AccessibilityEvents are fired. Such events denote some state transition in the user interface, for example, the focus has changed, a button has been clicked, etc. Such a service can optionally request the capability for querying the content of the active window. Development of an accessibility service requires extending this class and implementing its abstract methods.

Developer Guides
For more information about creating AccessibilityServices, read the Accessibility developer guide.

Lifecycle
The lifecycle of an accessibility service is managed exclusively by the system and follows the established service life cycle. Starting an accessibility service is triggered exclusively by the user explicitly turning the service on in device settings. After the system binds to a service, it calls AccessibilityService.onServiceConnected(). This method can be overridden by clients that want to perform post binding setup.

An accessibility service stops either when the user turns it off in device settings or when it calls AccessibilityService.disableSelf().

Declaration
An accessibility is declared as any other service in an AndroidManifest.xml, but it must do two things:

Specify that it handles the "android.accessibilityservice.AccessibilityService" Intent.
Request the Manifest.permission.BIND_ACCESSIBILITY_SERVICE permission to ensure that only the system can bind to it.
If either of these items is missing, the system will ignore the accessibility service. Following is an example declaration:

 <service android:name=".MyAccessibilityService"
         android:permission="android.permission.BIND_ACCESSIBILITY_SERVICE">
     <intent-filter>
         <action android:name="android.accessibilityservice.AccessibilityService" />
     </intent-filter>
     . . .
 </service>
Configuration
An accessibility service can be configured to receive specific types of accessibility events, listen only to specific packages, get events from each type only once in a given time frame, retrieve window content, specify a settings activity, etc.

There are two approaches for configuring an accessibility service:

Providing a meta-data entry in the manifest when declaring the service. A service declaration with a meta-data tag is presented below:

 <service android:name=".MyAccessibilityService">
     <intent-filter>
         <action android:name="android.accessibilityservice.AccessibilityService" />
     </intent-filter>
     <meta-data android:name="android.accessibilityservice" android:resource="@xml/accessibilityservice" />
 </service>
Note: This approach enables setting all properties.

For more details refer to SERVICE_META_DATA and <accessibility-service>.

Calling AccessibilityService.setServiceInfo(AccessibilityServiceInfo). Note that this method can be called any time to dynamically change the service configuration.
Note: This approach enables setting only dynamically configurable properties: AccessibilityServiceInfo.eventTypes, AccessibilityServiceInfo.feedbackType, AccessibilityServiceInfo.flags, AccessibilityServiceInfo.notificationTimeout, AccessibilityServiceInfo.packageNames

For more details refer to AccessibilityServiceInfo.

Retrieving window content
A service can specify in its declaration that it can retrieve window content which is represented as a tree of AccessibilityWindowInfo and AccessibilityNodeInfo objects. Note that declaring this capability requires that the service declares its configuration via an XML resource referenced by SERVICE_META_DATA.

Window content may be retrieved with AccessibilityEvent.getSource(), AccessibilityService.findFocus(int), AccessibilityService.getWindows(), or AccessibilityService.getRootInActiveWindow().

Note An accessibility service may have requested to be notified for a subset of the event types, and thus be unaware when the node hierarchy has changed. It is also possible for a node to contain outdated information because the window content may change at any time.

Drawing Accessibility Overlays
Accessibility services can draw overlays on top of existing screen contents. Accessibility overlays can be used to visually highlight items on the screen e.g. indicate the current item with accessibility focus. Overlays can also offer the user a way to interact with the service directly and quickly customize the service's behavior.

Accessibility overlays can be attached to a particular window or to the display itself. Attaching an overlay to a window allows the overly to move, grow and shrink as the window does. The overlay will maintain the same relative position within the window bounds as the window moves. The overlay will also maintain the same relative position within the window bounds if the window is resized. To attach an overlay to a window, use attachAccessibilityOverlayToWindow(int, SurfaceControl). Attaching an overlay to the display means that the overlay is independent of the active windows on that display. To attach an overlay to a display, use attachAccessibilityOverlayToDisplay(int, SurfaceControl).

When positioning an overlay that is attached to a window, the service must use window coordinates. In order to position an overlay on top of an existing UI element it is necessary to know the bounds of that element in window coordinates. To find the bounds in window coordinates of an element, find the corresponding AccessibilityNodeInfo as discussed above and call AccessibilityNodeInfo.getBoundsInWindow.

Notification strategy
All accessibility services are notified of all events they have requested, regardless of their feedback type.

Note: The event notification timeout is useful to avoid propagating events to the client too frequently since this is accomplished via an expensive interprocess call. One can think of the timeout as a criteria to determine when event generation has settled down.

Event types
AccessibilityEvent.TYPE_VIEW_CLICKED
AccessibilityEvent.TYPE_VIEW_LONG_CLICKED
AccessibilityEvent.TYPE_VIEW_FOCUSED
AccessibilityEvent.TYPE_VIEW_SELECTED
AccessibilityEvent.TYPE_VIEW_TEXT_CHANGED
AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED
AccessibilityEvent.TYPE_NOTIFICATION_STATE_CHANGED
AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_START
AccessibilityEvent.TYPE_TOUCH_EXPLORATION_GESTURE_END
AccessibilityEvent.TYPE_VIEW_HOVER_ENTER
AccessibilityEvent.TYPE_VIEW_HOVER_EXIT
AccessibilityEvent.TYPE_VIEW_SCROLLED
AccessibilityEvent.TYPE_VIEW_TEXT_SELECTION_CHANGED
AccessibilityEvent.TYPE_WINDOW_CONTENT_CHANGED
AccessibilityEvent.TYPE_ANNOUNCEMENT
AccessibilityEvent.TYPE_GESTURE_DETECTION_START
AccessibilityEvent.TYPE_GESTURE_DETECTION_END
AccessibilityEvent.TYPE_TOUCH_INTERACTION_START
AccessibilityEvent.TYPE_TOUCH_INTERACTION_END
AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUSED
AccessibilityEvent.TYPE_WINDOWS_CHANGED
AccessibilityEvent.TYPE_VIEW_ACCESSIBILITY_FOCUS_CLEARED
Feedback types
AccessibilityServiceInfo.FEEDBACK_AUDIBLE
AccessibilityServiceInfo.FEEDBACK_HAPTIC
AccessibilityServiceInfo.FEEDBACK_SPOKEN
AccessibilityServiceInfo.FEEDBACK_VISUAL
AccessibilityServiceInfo.FEEDBACK_GENERIC
AccessibilityServiceInfo.FEEDBACK_BRAILLE
See also:

AccessibilityEvent
AccessibilityServiceInfo
AccessibilityManager
Summary
Nested classes
class	AccessibilityService.GestureResultCallback
Class used to report status of dispatched gestures 

class	AccessibilityService.MagnificationController
Used to control and query the state of display magnification. 

class	AccessibilityService.ScreenshotResult
Can be used to construct a bitmap of the screenshot or any other operations for AccessibilityService.takeScreenshot API. 

class	AccessibilityService.SoftKeyboardController
Used to control, query, and listen for changes to the soft keyboard show mode. 

interface	AccessibilityService.TakeScreenshotCallback
Interface used to report status of taking screenshot. 

Constants
int	ERROR_TAKE_SCREENSHOT_INTERNAL_ERROR
The status of taking screenshot is failure and the reason is internal error.

int	ERROR_TAKE_SCREENSHOT_INTERVAL_TIME_SHORT
The status of taking screenshot is failure and the reason is that too little time has elapsed since the last screenshot.

int	ERROR_TAKE_SCREENSHOT_INVALID_DISPLAY
The status of taking screenshot is failure and the reason is invalid display Id.

int	ERROR_TAKE_SCREENSHOT_INVALID_WINDOW
The status of taking screenshot is failure and the reason is invalid accessibility window Id.

int	ERROR_TAKE_SCREENSHOT_NO_ACCESSIBILITY_ACCESS
The status of taking screenshot is failure and the reason is no accessibility access.

int	ERROR_TAKE_SCREENSHOT_SECURE_WINDOW
The status of taking screenshot is failure and the reason is the window contains secure content.

int	GESTURE_2_FINGER_DOUBLE_TAP
The user has performed a two-finger double tap gesture on the touch screen.

int	GESTURE_2_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a two-finger double tap and hold gesture on the touch screen.

int	GESTURE_2_FINGER_SINGLE_TAP
The user has performed a two-finger single tap gesture on the touch screen.

int	GESTURE_2_FINGER_SWIPE_DOWN
The user has performed a two-finger swipe down gesture on the touch screen.

int	GESTURE_2_FINGER_SWIPE_LEFT
The user has performed a two-finger swipe left gesture on the touch screen.

int	GESTURE_2_FINGER_SWIPE_RIGHT
The user has performed a two-finger swipe right gesture on the touch screen.

int	GESTURE_2_FINGER_SWIPE_UP
The user has performed a two-finger swipe up gesture on the touch screen.

int	GESTURE_2_FINGER_TRIPLE_TAP
The user has performed a two-finger triple tap gesture on the touch screen.

int	GESTURE_2_FINGER_TRIPLE_TAP_AND_HOLD
The user has performed a two-finger triple-tap and hold gesture on the touch screen.

int	GESTURE_3_FINGER_DOUBLE_TAP
The user has performed a three-finger double tap gesture on the touch screen.

int	GESTURE_3_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a three-finger double tap and hold gesture on the touch screen.

int	GESTURE_3_FINGER_SINGLE_TAP
The user has performed a three-finger single tap gesture on the touch screen.

int	GESTURE_3_FINGER_SINGLE_TAP_AND_HOLD
The user has performed a three-finger single-tap and hold gesture on the touch screen.

int	GESTURE_3_FINGER_SWIPE_DOWN
The user has performed a three-finger swipe down gesture on the touch screen.

int	GESTURE_3_FINGER_SWIPE_LEFT
The user has performed a three-finger swipe left gesture on the touch screen.

int	GESTURE_3_FINGER_SWIPE_RIGHT
The user has performed a three-finger swipe right gesture on the touch screen.

int	GESTURE_3_FINGER_SWIPE_UP
The user has performed a three-finger swipe up gesture on the touch screen.

int	GESTURE_3_FINGER_TRIPLE_TAP
The user has performed a three-finger triple tap gesture on the touch screen.

int	GESTURE_3_FINGER_TRIPLE_TAP_AND_HOLD
The user has performed a three-finger triple-tap and hold gesture on the touch screen.

int	GESTURE_4_FINGER_DOUBLE_TAP
The user has performed a four-finger double tap gesture on the touch screen.

int	GESTURE_4_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a two-finger double tap and hold gesture on the touch screen.

int	GESTURE_4_FINGER_SINGLE_TAP
The user has performed a four-finger single tap gesture on the touch screen.

int	GESTURE_4_FINGER_SWIPE_DOWN
The user has performed a four-finger swipe down gesture on the touch screen.

int	GESTURE_4_FINGER_SWIPE_LEFT
The user has performed a four-finger swipe left gesture on the touch screen.

int	GESTURE_4_FINGER_SWIPE_RIGHT
The user has performed a four-finger swipe right gesture on the touch screen.

int	GESTURE_4_FINGER_SWIPE_UP
The user has performed a four-finger swipe up gesture on the touch screen.

int	GESTURE_4_FINGER_TRIPLE_TAP
The user has performed a four-finger triple tap gesture on the touch screen.

int	GESTURE_DOUBLE_TAP
The user has performed a double tap gesture on the touch screen.

int	GESTURE_DOUBLE_TAP_AND_HOLD
The user has performed a double tap and hold gesture on the touch screen.

int	GESTURE_SWIPE_DOWN
The user has performed a swipe down gesture on the touch screen.

int	GESTURE_SWIPE_DOWN_AND_LEFT
The user has performed a down and left gesture on the touch screen.

int	GESTURE_SWIPE_DOWN_AND_RIGHT
The user has performed a down and right gesture on the touch screen.

int	GESTURE_SWIPE_DOWN_AND_UP
The user has performed a swipe down and up gesture on the touch screen.

int	GESTURE_SWIPE_LEFT
The user has performed a swipe left gesture on the touch screen.

int	GESTURE_SWIPE_LEFT_AND_DOWN
The user has performed a left and down gesture on the touch screen.

int	GESTURE_SWIPE_LEFT_AND_RIGHT
The user has performed a swipe left and right gesture on the touch screen.

int	GESTURE_SWIPE_LEFT_AND_UP
The user has performed a left and up gesture on the touch screen.

int	GESTURE_SWIPE_RIGHT
The user has performed a swipe right gesture on the touch screen.

int	GESTURE_SWIPE_RIGHT_AND_DOWN
The user has performed a right and down gesture on the touch screen.

int	GESTURE_SWIPE_RIGHT_AND_LEFT
The user has performed a swipe right and left gesture on the touch screen.

int	GESTURE_SWIPE_RIGHT_AND_UP
The user has performed a right and up gesture on the touch screen.

int	GESTURE_SWIPE_UP
The user has performed a swipe up gesture on the touch screen.

int	GESTURE_SWIPE_UP_AND_DOWN
The user has performed a swipe up and down gesture on the touch screen.

int	GESTURE_SWIPE_UP_AND_LEFT
The user has performed an up and left gesture on the touch screen.

int	GESTURE_SWIPE_UP_AND_RIGHT
The user has performed an up and right gesture on the touch screen.

int	GESTURE_UNKNOWN
The user has performed an unrecognized gesture on the touch screen.

int	GLOBAL_ACTION_ACCESSIBILITY_ALL_APPS
Action to show Launcher's all apps.

int	GLOBAL_ACTION_ACCESSIBILITY_BUTTON
Action to trigger the Accessibility Button

int	GLOBAL_ACTION_ACCESSIBILITY_BUTTON_CHOOSER
Action to bring up the Accessibility Button's chooser menu

int	GLOBAL_ACTION_ACCESSIBILITY_SHORTCUT
Action to trigger the Accessibility Shortcut.

int	GLOBAL_ACTION_BACK
Action to go back.

int	GLOBAL_ACTION_DISMISS_NOTIFICATION_SHADE
Action to dismiss the notification shade

int	GLOBAL_ACTION_DPAD_CENTER
Action to trigger dpad center keyevent.

int	GLOBAL_ACTION_DPAD_DOWN
Action to trigger dpad down keyevent.

int	GLOBAL_ACTION_DPAD_LEFT
Action to trigger dpad left keyevent.

int	GLOBAL_ACTION_DPAD_RIGHT
Action to trigger dpad right keyevent.

int	GLOBAL_ACTION_DPAD_UP
Action to trigger dpad up keyevent.

int	GLOBAL_ACTION_HOME
Action to go home.

int	GLOBAL_ACTION_KEYCODE_HEADSETHOOK
Action to send the KEYCODE_HEADSETHOOK KeyEvent, which is used to answer and hang up calls and play and stop media.

int	GLOBAL_ACTION_LOCK_SCREEN
Action to lock the screen

int	GLOBAL_ACTION_MEDIA_PLAY_PAUSE
Action to trigger media play/pause key event.

int	GLOBAL_ACTION_MENU
Action to trigger menu key event.

int	GLOBAL_ACTION_NOTIFICATIONS
Action to open the notifications.

int	GLOBAL_ACTION_POWER_DIALOG
Action to open the power long-press dialog.

int	GLOBAL_ACTION_QUICK_SETTINGS
Action to open the quick settings.

int	GLOBAL_ACTION_RECENTS
Action to toggle showing the overview of recent apps.

int	GLOBAL_ACTION_TAKE_SCREENSHOT
Action to take a screenshot

int	GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN
Action to toggle docking the current app's window.

String	SERVICE_INTERFACE
The Intent that must be declared as handled by the service.

String	SERVICE_META_DATA
Name under which an AccessibilityService component publishes information about itself.

int	SHOW_MODE_AUTO
Allow the system to control when the soft keyboard is shown.

int	SHOW_MODE_HIDDEN
Never show the soft keyboard.

int	SHOW_MODE_IGNORE_HARD_KEYBOARD
Allow the soft keyboard to be shown, even if a hard keyboard is connected

Inherited constants
From class android.app.Service
From class android.content.Context
From interface android.content.ComponentCallbacks2
Public constructors
AccessibilityService()
Public methods
void	attachAccessibilityOverlayToDisplay(int displayId, SurfaceControl sc)
Attaches a SurfaceControl containing an accessibility overlay to the specified display.

void	attachAccessibilityOverlayToWindow(int accessibilityWindowId, SurfaceControl sc)
Attaches an accessibility overlay SurfaceControl to the specified window.

boolean	clearCache()
Clears the cache.

boolean	clearCachedSubtree(AccessibilityNodeInfo node)
Invalidates node and its subtree in the cache.

Context	createDisplayContext(Display display)
Returns a new Context object from the current context but with resources adjusted to match the metrics of display.

Context	createWindowContext(int type, Bundle options)
Creates a Context for a non-activity window.

Context	createWindowContext(Display display, int type, Bundle options)
Creates a Context for a non-activity window on the given Display.

final void	disableSelf()
Disables the service.

final boolean	dispatchGesture(GestureDescription gesture, AccessibilityService.GestureResultCallback callback, Handler handler)
Dispatch a gesture to the touch screen.

AccessibilityNodeInfo	findFocus(int focus)
Find the view that has the specified focus type.

final AccessibilityButtonController	getAccessibilityButtonController(int displayId)
Returns the controller of specified logical display for the accessibility button within the system's navigation area.

final AccessibilityButtonController	getAccessibilityButtonController()
Returns the controller for the accessibility button within the system's navigation area.

final BrailleDisplayController	getBrailleDisplayController()
Returns the BrailleDisplayController which may be used to communicate with refreshable Braille displays that provide USB or Bluetooth Braille display HID support.

final FingerprintGestureController	getFingerprintGestureController()
Get the controller for fingerprint gestures.

final InputMethod	getInputMethod()
Returns the InputMethod instance after the system calls onCreateInputMethod(), which may be used to input text or get editable text selection change notifications.

final AccessibilityService.MagnificationController	getMagnificationController()
Returns the magnification controller, which may be used to query and modify the state of display magnification.

AccessibilityNodeInfo	getRootInActiveWindow()
Gets the root node in the currently active window if this service can retrieve window content.

AccessibilityNodeInfo	getRootInActiveWindow(int prefetchingStrategy)
Gets the root node in the currently active window if this service can retrieve window content.

final AccessibilityServiceInfo	getServiceInfo()
Gets the an AccessibilityServiceInfo describing this AccessibilityService.

final AccessibilityService.SoftKeyboardController	getSoftKeyboardController()
Returns the soft keyboard controller, which may be used to query and modify the soft keyboard show mode.

final List<AccessibilityNodeInfo.AccessibilityAction>	getSystemActions()
Returns a list of system actions available in the system right now.

Object	getSystemService(String name)
Return the handle to a system-level service by name.

final TouchInteractionController	getTouchInteractionController(int displayId)
Returns the touch interaction controller for the specified logical display, which may be used to detect gestures and otherwise control touch interactions.

List<AccessibilityWindowInfo>	getWindows()
Gets the windows on the screen of the default display.

final SparseArray<List<AccessibilityWindowInfo>>	getWindowsOnAllDisplays()
Gets the windows on the screen of all displays.

boolean	isCacheEnabled()
Returns true if the cache is enabled.

boolean	isNodeInCache(AccessibilityNodeInfo node)
Checks if node is in the cache.

abstract void	onAccessibilityEvent(AccessibilityEvent event)
Callback for AccessibilityEvents.

final IBinder	onBind(Intent intent)
Implement to return the implementation of the internal accessibility service interface.

InputMethod	onCreateInputMethod()
The default implementation returns our default InputMethod.

boolean	onGesture(AccessibilityGestureEvent gestureEvent)
Called by the system when the user performs a specific gesture on the specific touch screen.

abstract void	onInterrupt()
Callback for interrupting the accessibility feedback.

void	onMotionEvent(MotionEvent event)
Callback that allows an accessibility service to observe generic MotionEvents.

void	onSystemActionsChanged()
This is called when the system action list is changed.

final boolean	performGlobalAction(int action)
Performs a global action.

void	setAccessibilityFocusAppearance(int strokeWidth, int color)
Sets the strokeWidth and color of the accessibility focus rectangle.

void	setAnimationScale(float scale)
Sets the system settings values that control the scaling factor for animations.

boolean	setCacheEnabled(boolean enabled)
Sets the cache status.

void	setGestureDetectionPassthroughRegion(int displayId, Region region)
When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is enabled, this function requests that touch interactions starting in the specified region of the screen bypass the gesture detector.

final void	setServiceInfo(AccessibilityServiceInfo info)
Sets the AccessibilityServiceInfo that describes this service.

void	setTouchExplorationPassthroughRegion(int displayId, Region region)
When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is enabled, this function requests that touch interactions starting in the specified region of the screen bypass the touch explorer and go straight to the view hierarchy.

void	takeScreenshot(int displayId, Executor executor, AccessibilityService.TakeScreenshotCallback callback)
Takes a screenshot of the specified display and returns it via an AccessibilityService.ScreenshotResult.

void	takeScreenshotOfWindow(int accessibilityWindowId, Executor executor, AccessibilityService.TakeScreenshotCallback callback)
Takes a screenshot of the specified window and returns it via an AccessibilityService.ScreenshotResult.

Protected methods
boolean	onGesture(int gestureId)
This method was deprecated in API level 30. Override onGesture(android.accessibilityservice.AccessibilityGestureEvent) instead.

boolean	onKeyEvent(KeyEvent event)
Callback that allows an accessibility service to observe the key events before they are passed to the rest of the system.

void	onServiceConnected()
This method is a part of the AccessibilityService lifecycle and is called after the system has successfully bound to the service.

Inherited methods
From class android.app.Service
From class android.content.ContextWrapper
From class android.content.Context
From class java.lang.Object
From interface android.content.ComponentCallbacks2
From interface android.content.ComponentCallbacks
Constants
ERROR_TAKE_SCREENSHOT_INTERNAL_ERROR
Added in API level 30

public static final int ERROR_TAKE_SCREENSHOT_INTERNAL_ERROR
The status of taking screenshot is failure and the reason is internal error.

Constant Value: 1 (0x00000001)

ERROR_TAKE_SCREENSHOT_INTERVAL_TIME_SHORT
Added in API level 30

public static final int ERROR_TAKE_SCREENSHOT_INTERVAL_TIME_SHORT
The status of taking screenshot is failure and the reason is that too little time has elapsed since the last screenshot.

Constant Value: 3 (0x00000003)

ERROR_TAKE_SCREENSHOT_INVALID_DISPLAY
Added in API level 30

public static final int ERROR_TAKE_SCREENSHOT_INVALID_DISPLAY
The status of taking screenshot is failure and the reason is invalid display Id.

Constant Value: 4 (0x00000004)

ERROR_TAKE_SCREENSHOT_INVALID_WINDOW
Added in API level 34

public static final int ERROR_TAKE_SCREENSHOT_INVALID_WINDOW
The status of taking screenshot is failure and the reason is invalid accessibility window Id.

Constant Value: 5 (0x00000005)

ERROR_TAKE_SCREENSHOT_NO_ACCESSIBILITY_ACCESS
Added in API level 30

public static final int ERROR_TAKE_SCREENSHOT_NO_ACCESSIBILITY_ACCESS
The status of taking screenshot is failure and the reason is no accessibility access.

Constant Value: 2 (0x00000002)

ERROR_TAKE_SCREENSHOT_SECURE_WINDOW
Added in API level 34

public static final int ERROR_TAKE_SCREENSHOT_SECURE_WINDOW
The status of taking screenshot is failure and the reason is the window contains secure content.

See also:

WindowManager.LayoutParams.FLAG_SECURE
Constant Value: 6 (0x00000006)

GESTURE_2_FINGER_DOUBLE_TAP
Added in API level 30

public static final int GESTURE_2_FINGER_DOUBLE_TAP
The user has performed a two-finger double tap gesture on the touch screen.

Constant Value: 20 (0x00000014)

GESTURE_2_FINGER_DOUBLE_TAP_AND_HOLD
Added in API level 30

public static final int GESTURE_2_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a two-finger double tap and hold gesture on the touch screen.

Constant Value: 40 (0x00000028)

GESTURE_2_FINGER_SINGLE_TAP
Added in API level 30

public static final int GESTURE_2_FINGER_SINGLE_TAP
The user has performed a two-finger single tap gesture on the touch screen.

Constant Value: 19 (0x00000013)

GESTURE_2_FINGER_SWIPE_DOWN
Added in API level 30

public static final int GESTURE_2_FINGER_SWIPE_DOWN
The user has performed a two-finger swipe down gesture on the touch screen.

Constant Value: 26 (0x0000001a)

GESTURE_2_FINGER_SWIPE_LEFT
Added in API level 30

public static final int GESTURE_2_FINGER_SWIPE_LEFT
The user has performed a two-finger swipe left gesture on the touch screen.

Constant Value: 27 (0x0000001b)

GESTURE_2_FINGER_SWIPE_RIGHT
Added in API level 30

public static final int GESTURE_2_FINGER_SWIPE_RIGHT
The user has performed a two-finger swipe right gesture on the touch screen.

Constant Value: 28 (0x0000001c)

GESTURE_2_FINGER_SWIPE_UP
Added in API level 30

public static final int GESTURE_2_FINGER_SWIPE_UP
The user has performed a two-finger swipe up gesture on the touch screen.

Constant Value: 25 (0x00000019)

GESTURE_2_FINGER_TRIPLE_TAP
Added in API level 30

public static final int GESTURE_2_FINGER_TRIPLE_TAP
The user has performed a two-finger triple tap gesture on the touch screen.

Constant Value: 21 (0x00000015)

GESTURE_2_FINGER_TRIPLE_TAP_AND_HOLD
Added in API level 31

public static final int GESTURE_2_FINGER_TRIPLE_TAP_AND_HOLD
The user has performed a two-finger triple-tap and hold gesture on the touch screen.

Constant Value: 43 (0x0000002b)

GESTURE_3_FINGER_DOUBLE_TAP
Added in API level 30

public static final int GESTURE_3_FINGER_DOUBLE_TAP
The user has performed a three-finger double tap gesture on the touch screen.

Constant Value: 23 (0x00000017)

GESTURE_3_FINGER_DOUBLE_TAP_AND_HOLD
Added in API level 30

public static final int GESTURE_3_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a three-finger double tap and hold gesture on the touch screen.

Constant Value: 41 (0x00000029)

GESTURE_3_FINGER_SINGLE_TAP
Added in API level 30

public static final int GESTURE_3_FINGER_SINGLE_TAP
The user has performed a three-finger single tap gesture on the touch screen.

Constant Value: 22 (0x00000016)

GESTURE_3_FINGER_SINGLE_TAP_AND_HOLD
Added in API level 31

public static final int GESTURE_3_FINGER_SINGLE_TAP_AND_HOLD
The user has performed a three-finger single-tap and hold gesture on the touch screen.

Constant Value: 44 (0x0000002c)

GESTURE_3_FINGER_SWIPE_DOWN
Added in API level 30

public static final int GESTURE_3_FINGER_SWIPE_DOWN
The user has performed a three-finger swipe down gesture on the touch screen.

Constant Value: 30 (0x0000001e)

GESTURE_3_FINGER_SWIPE_LEFT
Added in API level 30

public static final int GESTURE_3_FINGER_SWIPE_LEFT
The user has performed a three-finger swipe left gesture on the touch screen.

Constant Value: 31 (0x0000001f)

GESTURE_3_FINGER_SWIPE_RIGHT
Added in API level 30

public static final int GESTURE_3_FINGER_SWIPE_RIGHT
The user has performed a three-finger swipe right gesture on the touch screen.

Constant Value: 32 (0x00000020)

GESTURE_3_FINGER_SWIPE_UP
Added in API level 30

public static final int GESTURE_3_FINGER_SWIPE_UP
The user has performed a three-finger swipe up gesture on the touch screen.

Constant Value: 29 (0x0000001d)

GESTURE_3_FINGER_TRIPLE_TAP
Added in API level 30

public static final int GESTURE_3_FINGER_TRIPLE_TAP
The user has performed a three-finger triple tap gesture on the touch screen.

Constant Value: 24 (0x00000018)

GESTURE_3_FINGER_TRIPLE_TAP_AND_HOLD
Added in API level 31

public static final int GESTURE_3_FINGER_TRIPLE_TAP_AND_HOLD
The user has performed a three-finger triple-tap and hold gesture on the touch screen.

Constant Value: 45 (0x0000002d)

GESTURE_4_FINGER_DOUBLE_TAP
Added in API level 30

public static final int GESTURE_4_FINGER_DOUBLE_TAP
The user has performed a four-finger double tap gesture on the touch screen.

Constant Value: 38 (0x00000026)

GESTURE_4_FINGER_DOUBLE_TAP_AND_HOLD
Added in API level 30

public static final int GESTURE_4_FINGER_DOUBLE_TAP_AND_HOLD
The user has performed a two-finger double tap and hold gesture on the touch screen.

Constant Value: 42 (0x0000002a)

GESTURE_4_FINGER_SINGLE_TAP
Added in API level 30

public static final int GESTURE_4_FINGER_SINGLE_TAP
The user has performed a four-finger single tap gesture on the touch screen.

Constant Value: 37 (0x00000025)

GESTURE_4_FINGER_SWIPE_DOWN
Added in API level 30

public static final int GESTURE_4_FINGER_SWIPE_DOWN
The user has performed a four-finger swipe down gesture on the touch screen.

Constant Value: 34 (0x00000022)

GESTURE_4_FINGER_SWIPE_LEFT
Added in API level 30

public static final int GESTURE_4_FINGER_SWIPE_LEFT
The user has performed a four-finger swipe left gesture on the touch screen.

Constant Value: 35 (0x00000023)

GESTURE_4_FINGER_SWIPE_RIGHT
Added in API level 30

public static final int GESTURE_4_FINGER_SWIPE_RIGHT
The user has performed a four-finger swipe right gesture on the touch screen.

Constant Value: 36 (0x00000024)

GESTURE_4_FINGER_SWIPE_UP
Added in API level 30

public static final int GESTURE_4_FINGER_SWIPE_UP
The user has performed a four-finger swipe up gesture on the touch screen.

Constant Value: 33 (0x00000021)

GESTURE_4_FINGER_TRIPLE_TAP
Added in API level 30

public static final int GESTURE_4_FINGER_TRIPLE_TAP
The user has performed a four-finger triple tap gesture on the touch screen.

Constant Value: 39 (0x00000027)

GESTURE_DOUBLE_TAP
Added in API level 30

public static final int GESTURE_DOUBLE_TAP
The user has performed a double tap gesture on the touch screen.

Constant Value: 17 (0x00000011)

GESTURE_DOUBLE_TAP_AND_HOLD
Added in API level 30

public static final int GESTURE_DOUBLE_TAP_AND_HOLD
The user has performed a double tap and hold gesture on the touch screen.

Constant Value: 18 (0x00000012)

GESTURE_SWIPE_DOWN
Added in API level 16

public static final int GESTURE_SWIPE_DOWN
The user has performed a swipe down gesture on the touch screen.

Constant Value: 2 (0x00000002)

GESTURE_SWIPE_DOWN_AND_LEFT
Added in API level 16

public static final int GESTURE_SWIPE_DOWN_AND_LEFT
The user has performed a down and left gesture on the touch screen.

Constant Value: 15 (0x0000000f)

GESTURE_SWIPE_DOWN_AND_RIGHT
Added in API level 16

public static final int GESTURE_SWIPE_DOWN_AND_RIGHT
The user has performed a down and right gesture on the touch screen.

Constant Value: 16 (0x00000010)

GESTURE_SWIPE_DOWN_AND_UP
Added in API level 16

public static final int GESTURE_SWIPE_DOWN_AND_UP
The user has performed a swipe down and up gesture on the touch screen.

Constant Value: 8 (0x00000008)

GESTURE_SWIPE_LEFT
Added in API level 16

public static final int GESTURE_SWIPE_LEFT
The user has performed a swipe left gesture on the touch screen.

Constant Value: 3 (0x00000003)

GESTURE_SWIPE_LEFT_AND_DOWN
Added in API level 16

public static final int GESTURE_SWIPE_LEFT_AND_DOWN
The user has performed a left and down gesture on the touch screen.

Constant Value: 10 (0x0000000a)

GESTURE_SWIPE_LEFT_AND_RIGHT
Added in API level 16

public static final int GESTURE_SWIPE_LEFT_AND_RIGHT
The user has performed a swipe left and right gesture on the touch screen.

Constant Value: 5 (0x00000005)

GESTURE_SWIPE_LEFT_AND_UP
Added in API level 16

public static final int GESTURE_SWIPE_LEFT_AND_UP
The user has performed a left and up gesture on the touch screen.

Constant Value: 9 (0x00000009)

GESTURE_SWIPE_RIGHT
Added in API level 16

public static final int GESTURE_SWIPE_RIGHT
The user has performed a swipe right gesture on the touch screen.

Constant Value: 4 (0x00000004)

GESTURE_SWIPE_RIGHT_AND_DOWN
Added in API level 16

public static final int GESTURE_SWIPE_RIGHT_AND_DOWN
The user has performed a right and down gesture on the touch screen.

Constant Value: 12 (0x0000000c)

GESTURE_SWIPE_RIGHT_AND_LEFT
Added in API level 16

public static final int GESTURE_SWIPE_RIGHT_AND_LEFT
The user has performed a swipe right and left gesture on the touch screen.

Constant Value: 6 (0x00000006)

GESTURE_SWIPE_RIGHT_AND_UP
Added in API level 16

public static final int GESTURE_SWIPE_RIGHT_AND_UP
The user has performed a right and up gesture on the touch screen.

Constant Value: 11 (0x0000000b)

GESTURE_SWIPE_UP
Added in API level 16

public static final int GESTURE_SWIPE_UP
The user has performed a swipe up gesture on the touch screen.

Constant Value: 1 (0x00000001)

GESTURE_SWIPE_UP_AND_DOWN
Added in API level 16

public static final int GESTURE_SWIPE_UP_AND_DOWN
The user has performed a swipe up and down gesture on the touch screen.

Constant Value: 7 (0x00000007)

GESTURE_SWIPE_UP_AND_LEFT
Added in API level 16

public static final int GESTURE_SWIPE_UP_AND_LEFT
The user has performed an up and left gesture on the touch screen.

Constant Value: 13 (0x0000000d)

GESTURE_SWIPE_UP_AND_RIGHT
Added in API level 16

public static final int GESTURE_SWIPE_UP_AND_RIGHT
The user has performed an up and right gesture on the touch screen.

Constant Value: 14 (0x0000000e)

GESTURE_UNKNOWN
Added in API level 31

public static final int GESTURE_UNKNOWN
The user has performed an unrecognized gesture on the touch screen. This gesture is only dispatched when AccessibilityServiceInfo.FLAG_SEND_MOTION_EVENTS is set.

Constant Value: 0 (0x00000000)

GLOBAL_ACTION_ACCESSIBILITY_ALL_APPS
Added in API level 31

public static final int GLOBAL_ACTION_ACCESSIBILITY_ALL_APPS
Action to show Launcher's all apps.

Constant Value: 14 (0x0000000e)

GLOBAL_ACTION_ACCESSIBILITY_BUTTON
Added in API level 31

public static final int GLOBAL_ACTION_ACCESSIBILITY_BUTTON
Action to trigger the Accessibility Button

Constant Value: 11 (0x0000000b)

GLOBAL_ACTION_ACCESSIBILITY_BUTTON_CHOOSER
Added in API level 31

public static final int GLOBAL_ACTION_ACCESSIBILITY_BUTTON_CHOOSER
Action to bring up the Accessibility Button's chooser menu

Constant Value: 12 (0x0000000c)

GLOBAL_ACTION_ACCESSIBILITY_SHORTCUT
Added in API level 31

public static final int GLOBAL_ACTION_ACCESSIBILITY_SHORTCUT
Action to trigger the Accessibility Shortcut. This shortcut has a hardware trigger and can be activated by holding down the two volume keys.

Constant Value: 13 (0x0000000d)

GLOBAL_ACTION_BACK
Added in API level 16

public static final int GLOBAL_ACTION_BACK
Action to go back.

Constant Value: 1 (0x00000001)

GLOBAL_ACTION_DISMISS_NOTIFICATION_SHADE
Added in API level 31

public static final int GLOBAL_ACTION_DISMISS_NOTIFICATION_SHADE
Action to dismiss the notification shade

Constant Value: 15 (0x0000000f)

GLOBAL_ACTION_DPAD_CENTER
Added in API level 33

public static final int GLOBAL_ACTION_DPAD_CENTER
Action to trigger dpad center keyevent.

Constant Value: 20 (0x00000014)

GLOBAL_ACTION_DPAD_DOWN
Added in API level 33

public static final int GLOBAL_ACTION_DPAD_DOWN
Action to trigger dpad down keyevent.

Constant Value: 17 (0x00000011)

GLOBAL_ACTION_DPAD_LEFT
Added in API level 33

public static final int GLOBAL_ACTION_DPAD_LEFT
Action to trigger dpad left keyevent.

Constant Value: 18 (0x00000012)

GLOBAL_ACTION_DPAD_RIGHT
Added in API level 33

public static final int GLOBAL_ACTION_DPAD_RIGHT
Action to trigger dpad right keyevent.

Constant Value: 19 (0x00000013)

GLOBAL_ACTION_DPAD_UP
Added in API level 33

public static final int GLOBAL_ACTION_DPAD_UP
Action to trigger dpad up keyevent.

Constant Value: 16 (0x00000010)

GLOBAL_ACTION_HOME
Added in API level 16

public static final int GLOBAL_ACTION_HOME
Action to go home.

Constant Value: 2 (0x00000002)

GLOBAL_ACTION_KEYCODE_HEADSETHOOK
Added in API level 31

public static final int GLOBAL_ACTION_KEYCODE_HEADSETHOOK
Action to send the KEYCODE_HEADSETHOOK KeyEvent, which is used to answer and hang up calls and play and stop media. Calling takes priority. If there is an incoming call, this action can be used to answer that call, and if there is an ongoing call, to hang up on that call.

Constant Value: 10 (0x0000000a)

GLOBAL_ACTION_LOCK_SCREEN
Added in API level 28

public static final int GLOBAL_ACTION_LOCK_SCREEN
Action to lock the screen

Constant Value: 8 (0x00000008)

GLOBAL_ACTION_MEDIA_PLAY_PAUSE
Added in API level 36

public static final int GLOBAL_ACTION_MEDIA_PLAY_PAUSE
Action to trigger media play/pause key event.

Constant Value: 22 (0x00000016)

GLOBAL_ACTION_MENU
Added in API level 36

public static final int GLOBAL_ACTION_MENU
Action to trigger menu key event.

Constant Value: 21 (0x00000015)

GLOBAL_ACTION_NOTIFICATIONS
Added in API level 16

public static final int GLOBAL_ACTION_NOTIFICATIONS
Action to open the notifications.

Constant Value: 4 (0x00000004)

GLOBAL_ACTION_POWER_DIALOG
Added in API level 21

public static final int GLOBAL_ACTION_POWER_DIALOG
Action to open the power long-press dialog.

Constant Value: 6 (0x00000006)

GLOBAL_ACTION_QUICK_SETTINGS
Added in API level 17

public static final int GLOBAL_ACTION_QUICK_SETTINGS
Action to open the quick settings.

Constant Value: 5 (0x00000005)

GLOBAL_ACTION_RECENTS
Added in API level 16

public static final int GLOBAL_ACTION_RECENTS
Action to toggle showing the overview of recent apps. Will fail on platforms that don't show recent apps.

Constant Value: 3 (0x00000003)

GLOBAL_ACTION_TAKE_SCREENSHOT
Added in API level 28

public static final int GLOBAL_ACTION_TAKE_SCREENSHOT
Action to take a screenshot

Constant Value: 9 (0x00000009)

GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN
Added in API level 24

public static final int GLOBAL_ACTION_TOGGLE_SPLIT_SCREEN
Action to toggle docking the current app's window.

Note: It is effective only if it appears in getSystemActions().

Constant Value: 7 (0x00000007)

SERVICE_INTERFACE
Added in API level 4

public static final String SERVICE_INTERFACE
The Intent that must be declared as handled by the service.

Constant Value: "android.accessibilityservice.AccessibilityService"

SERVICE_META_DATA
Added in API level 14

public static final String SERVICE_META_DATA
Name under which an AccessibilityService component publishes information about itself. This meta-data must reference an XML resource containing an <accessibility-service> tag. This is a sample XML file configuring an accessibility service:


 <accessibility-service
     android:accessibilityEventTypes="typeViewClicked|typeViewFocused"
     android:packageNames="foo.bar, foo.baz"
     android:accessibilityFeedbackType="feedbackSpoken"
     android:notificationTimeout="100"
     android:accessibilityFlags="flagDefault"
     android:settingsActivity="foo.bar.TestBackActivity"
     android:canRetrieveWindowContent="true"
     android:canRequestTouchExplorationMode="true"
     . . .
 />
Constant Value: "android.accessibilityservice"

SHOW_MODE_AUTO
Added in API level 24

public static final int SHOW_MODE_AUTO
Allow the system to control when the soft keyboard is shown.

See also:

AccessibilityService.SoftKeyboardController
Constant Value: 0 (0x00000000)

SHOW_MODE_HIDDEN
Added in API level 24

public static final int SHOW_MODE_HIDDEN
Never show the soft keyboard.

See also:

AccessibilityService.SoftKeyboardController
Constant Value: 1 (0x00000001)

SHOW_MODE_IGNORE_HARD_KEYBOARD
Added in API level 29

public static final int SHOW_MODE_IGNORE_HARD_KEYBOARD
Allow the soft keyboard to be shown, even if a hard keyboard is connected

See also:

AccessibilityService.SoftKeyboardController
Constant Value: 2 (0x00000002)

Public constructors
AccessibilityService

public AccessibilityService ()
Public methods
attachAccessibilityOverlayToDisplay
Added in API level 34

public void attachAccessibilityOverlayToDisplay (int displayId, 
                SurfaceControl sc)
Attaches a SurfaceControl containing an accessibility overlay to the specified display. This type of overlay should be used for content that does not need to track the location and size of Views in the currently active app e.g. service configuration or general service UI.

Generally speaking, an accessibility overlay will be a View. To embed the View into a SurfaceControl, create a SurfaceControlViewHost and attach the View using SurfaceControlViewHost.setView(View, int, int). Then obtain the SurfaceControl by calling viewHost.getSurfacePackage().getSurfaceControl().

To remove this overlay and free the associated resources, use new SurfaceControl.Transaction().reparent(sc, null).apply();.

If the specified overlay has already been attached to the specified display this method does nothing. If the specified overlay has already been attached to a previous display this function will transfer the overlay to the new display. Services can attach multiple overlays. Use new SurfaceControl.Transaction().setLayer(sc, layer).apply();. to coordinate the order of the overlays on screen.

Parameters
displayId	int: the display to which the SurfaceControl should be attached.
sc	SurfaceControl: the SurfaceControl containing the overlay content This value cannot be null.
attachAccessibilityOverlayToWindow
Added in API level 34

public void attachAccessibilityOverlayToWindow (int accessibilityWindowId, 
                SurfaceControl sc)
Attaches an accessibility overlay SurfaceControl to the specified window. This method should be used when you want the overlay to move and resize as the parent window moves and resizes.

Generally speaking, an accessibility overlay will be a View. To embed the View into a SurfaceControl, create a SurfaceControlViewHost and attach the View using SurfaceControlViewHost.setView(View, int, int). Then obtain the SurfaceControl by calling viewHost.getSurfacePackage().getSurfaceControl().

To remove this overlay and free the associated resources, use new SurfaceControl.Transaction().reparent(sc, null).apply();.

If the specified overlay has already been attached to the specified window this method does nothing. If the specified overlay has already been attached to a previous window this function will transfer the overlay to the new window. Services can attach multiple overlays. Use new SurfaceControl.Transaction().setLayer(sc, layer).apply();. to coordinate the order of the overlays on screen.

Parameters
accessibilityWindowId	int: The window id, from AccessibilityWindowInfo.getId().
sc	SurfaceControl: the SurfaceControl containing the overlay content This value cannot be null.
clearCache
Added in API level 33

public boolean clearCache ()
Clears the cache.

Returns
boolean	true if the cache was cleared
clearCachedSubtree
Added in API level 33

public boolean clearCachedSubtree (AccessibilityNodeInfo node)
Invalidates node and its subtree in the cache.

Parameters
node	AccessibilityNodeInfo: the node to invalidate. This value cannot be null.
Returns
boolean	true if the subtree rooted at node was invalidated.
createDisplayContext
Added in API level 17

public Context createDisplayContext (Display display)
Returns a new Context object from the current context but with resources adjusted to match the metrics of display. Each call to this method returns a new instance of a context object. Context objects are not shared; however, common state (such as the ClassLoader and other resources for the same configuration) can be shared, so the Context itself is lightweight.

Note: This Context is not expected to be updated with new configuration if the underlying display configuration changes and the cached Resources it returns could be stale. It is suggested to use DisplayManager.DisplayListener to listen for changes and re-create an instance if necessary.

This Context is not a UI context, do not use it to access UI components or obtain a WindowManager instance.

To obtain an instance of WindowManager configured to show windows on the given display, call createWindowContext(int, android.os.Bundle) on the returned display context, then call getSystemService(java.lang.String) or getSystemService(java.lang.Class) on the returned window context.

Parameters
display	Display: The display to which the current context's resources are adjusted. This value cannot be null.
Returns
Context	This value cannot be null.
createWindowContext
Added in API level 30

public Context createWindowContext (int type, 
                Bundle options)
Creates a Context for a non-activity window.

A window context is a context that can be used to add non-activity windows, such as WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY. A window context must be created from a context that has an associated Display, such as Activity or a context created with createDisplayContext(android.view.Display).

The window context is created with the appropriate Configuration for the area of the display that the windows created with it can occupy; it must be used when inflating views, such that they can be inflated with proper Resources. Below is a sample code to add an application overlay window on the primary display:


 ...
 final DisplayManager dm = anyContext.getSystemService(DisplayManager.class);
 final Display primaryDisplay = dm.getDisplay(DEFAULT_DISPLAY);
 final Context windowContext = anyContext.createDisplayContext(primaryDisplay)
         .createWindowContext(TYPE_APPLICATION_OVERLAY, null);
 final View overlayView = Inflater.from(windowContext).inflate(someLayoutXml, null);

 // WindowManager.LayoutParams initialization
 ...
 // The types used in addView and createWindowContext must match.
 mParams.type = TYPE_APPLICATION_OVERLAY;
 ...

 windowContext.getSystemService(WindowManager.class).addView(overlayView, mParams);
 
This context's configuration and resources are adjusted to an area of the display where the windows with provided type will be added. Note that all windows associated with the same context will have an affinity and can only be moved together between different displays or areas on a display. If there is a need to add different window types, or non-associated windows, separate Contexts should be used.

Creating a window context is an expensive operation. Misuse of this API may lead to a huge performance drop. The best practice is to use the same window context when possible. An approach is to create one window context with specific window type and display and use it everywhere it's needed.

After Build.VERSION_CODES.S, window context provides the capability to receive configuration changes for existing token by overriding the token of the WindowManager.LayoutParams passed in WindowManager.addView(View, LayoutParams). This is useful when an application needs to attach its window to an existing activity for window token sharing use-case.

Note that the window context in Build.VERSION_CODES.R didn't have this capability. This is a no-op for the window context in Build.VERSION_CODES.R.

Below is sample code to attach an existing token to a window context:

 final DisplayManager dm = anyContext.getSystemService(DisplayManager.class);
 final Display primaryDisplay = dm.getDisplay(DEFAULT_DISPLAY);
 final Context windowContext = anyContext.createWindowContext(primaryDisplay,
         TYPE_APPLICATION, null);

 // Get an existing token.
 final IBinder existingToken = activity.getWindow().getAttributes().token;

 // The types used in addView() and createWindowContext() must match.
 final WindowManager.LayoutParams params = new WindowManager.LayoutParams(TYPE_APPLICATION);
 params.token = existingToken;

 // After WindowManager#addView(), the server side will extract the provided token from
 // LayoutParams#token (existingToken in the sample code), and switch to propagate
 // configuration changes from the node associated with the provided token.
 windowContext.getSystemService(WindowManager.class).addView(overlayView, mParams);
 
After Build.VERSION_CODES.S, window context provides the capability to listen to its Configuration changes by calling registerComponentCallbacks(android.content.ComponentCallbacks), while other kinds of Context will register the ComponentCallbacks to its Application context. Note that window context only propagate ComponentCallbacks.onConfigurationChanged(Configuration) callback. ComponentCallbacks.onLowMemory() or other callbacks in ComponentCallbacks2 won't be invoked.

Note that using Application or Service context for UI-related queries may result in layout or continuity issues on devices with variable screen sizes (e.g. foldables) or in multi-window modes, since these non-UI contexts may not reflect the Configuration changes for the visual container.

Parameters
type	int: Value is WindowManager.LayoutParams.TYPE_BASE_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION_STARTING, WindowManager.LayoutParams.TYPE_DRAWN_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION_PANEL, WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA, WindowManager.LayoutParams.TYPE_APPLICATION_SUB_PANEL, WindowManager.LayoutParams.TYPE_APPLICATION_ATTACHED_DIALOG, android.view.WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_APPLICATION_ABOVE_SUB_PANEL, WindowManager.LayoutParams.TYPE_STATUS_BAR, WindowManager.LayoutParams.TYPE_SEARCH_BAR, WindowManager.LayoutParams.TYPE_PHONE, WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, android.view.WindowManager.LayoutParams.TYPE_KEYGUARD, WindowManager.LayoutParams.TYPE_TOAST, WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, WindowManager.LayoutParams.TYPE_PRIORITY_PHONE, WindowManager.LayoutParams.TYPE_SYSTEM_DIALOG, WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG, WindowManager.LayoutParams.TYPE_SYSTEM_ERROR, WindowManager.LayoutParams.TYPE_INPUT_METHOD, WindowManager.LayoutParams.TYPE_INPUT_METHOD_DIALOG, WindowManager.LayoutParams.TYPE_WALLPAPER, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL, android.view.WindowManager.LayoutParams.TYPE_SECURE_SYSTEM_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_DRAG, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_SUB_PANEL, android.view.WindowManager.LayoutParams.TYPE_POINTER, android.view.WindowManager.LayoutParams.TYPE_NAVIGATION_BAR, android.view.WindowManager.LayoutParams.TYPE_VOLUME_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_BOOT_PROGRESS, android.view.WindowManager.LayoutParams.TYPE_INPUT_CONSUMER, android.view.WindowManager.LayoutParams.TYPE_NAVIGATION_BAR_PANEL, android.view.WindowManager.LayoutParams.TYPE_DISPLAY_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_MAGNIFICATION_OVERLAY, WindowManager.LayoutParams.TYPE_PRIVATE_PRESENTATION, android.view.WindowManager.LayoutParams.TYPE_VOICE_INTERACTION, WindowManager.LayoutParams.TYPE_ACCESSIBILITY_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_VOICE_INTERACTION_STARTING, android.view.WindowManager.LayoutParams.TYPE_DOCK_DIVIDER, android.view.WindowManager.LayoutParams.TYPE_QS_DIALOG, android.view.WindowManager.LayoutParams.TYPE_SCREENSHOT, android.view.WindowManager.LayoutParams.TYPE_PRESENTATION, WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_ACCESSIBILITY_MAGNIFICATION_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_NOTIFICATION_SHADE, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_ADDITIONAL, or android.view.WindowManager.LayoutParams.INVALID_WINDOW_TYPE
options	Bundle: This value may be null.
Returns
Context	This value cannot be null.
createWindowContext
Added in API level 31

public Context createWindowContext (Display display, 
                int type, 
                Bundle options)
Creates a Context for a non-activity window on the given Display.

Similar to createWindowContext(int, android.os.Bundle), but the display is passed in, instead of implicitly using the original Context's Display.

Parameters
display	Display: This value cannot be null.
type	int: Value is WindowManager.LayoutParams.TYPE_BASE_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION_STARTING, WindowManager.LayoutParams.TYPE_DRAWN_APPLICATION, WindowManager.LayoutParams.TYPE_APPLICATION_PANEL, WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA, WindowManager.LayoutParams.TYPE_APPLICATION_SUB_PANEL, WindowManager.LayoutParams.TYPE_APPLICATION_ATTACHED_DIALOG, android.view.WindowManager.LayoutParams.TYPE_APPLICATION_MEDIA_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_APPLICATION_ABOVE_SUB_PANEL, WindowManager.LayoutParams.TYPE_STATUS_BAR, WindowManager.LayoutParams.TYPE_SEARCH_BAR, WindowManager.LayoutParams.TYPE_PHONE, WindowManager.LayoutParams.TYPE_SYSTEM_ALERT, android.view.WindowManager.LayoutParams.TYPE_KEYGUARD, WindowManager.LayoutParams.TYPE_TOAST, WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, WindowManager.LayoutParams.TYPE_PRIORITY_PHONE, WindowManager.LayoutParams.TYPE_SYSTEM_DIALOG, WindowManager.LayoutParams.TYPE_KEYGUARD_DIALOG, WindowManager.LayoutParams.TYPE_SYSTEM_ERROR, WindowManager.LayoutParams.TYPE_INPUT_METHOD, WindowManager.LayoutParams.TYPE_INPUT_METHOD_DIALOG, WindowManager.LayoutParams.TYPE_WALLPAPER, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_PANEL, android.view.WindowManager.LayoutParams.TYPE_SECURE_SYSTEM_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_DRAG, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_SUB_PANEL, android.view.WindowManager.LayoutParams.TYPE_POINTER, android.view.WindowManager.LayoutParams.TYPE_NAVIGATION_BAR, android.view.WindowManager.LayoutParams.TYPE_VOLUME_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_BOOT_PROGRESS, android.view.WindowManager.LayoutParams.TYPE_INPUT_CONSUMER, android.view.WindowManager.LayoutParams.TYPE_NAVIGATION_BAR_PANEL, android.view.WindowManager.LayoutParams.TYPE_DISPLAY_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_MAGNIFICATION_OVERLAY, WindowManager.LayoutParams.TYPE_PRIVATE_PRESENTATION, android.view.WindowManager.LayoutParams.TYPE_VOICE_INTERACTION, WindowManager.LayoutParams.TYPE_ACCESSIBILITY_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_VOICE_INTERACTION_STARTING, android.view.WindowManager.LayoutParams.TYPE_DOCK_DIVIDER, android.view.WindowManager.LayoutParams.TYPE_QS_DIALOG, android.view.WindowManager.LayoutParams.TYPE_SCREENSHOT, android.view.WindowManager.LayoutParams.TYPE_PRESENTATION, WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_ACCESSIBILITY_MAGNIFICATION_OVERLAY, android.view.WindowManager.LayoutParams.TYPE_NOTIFICATION_SHADE, android.view.WindowManager.LayoutParams.TYPE_STATUS_BAR_ADDITIONAL, or android.view.WindowManager.LayoutParams.INVALID_WINDOW_TYPE
options	Bundle: This value may be null.
Returns
Context	This value cannot be null.
disableSelf
Added in API level 24

public final void disableSelf ()
Disables the service. After calling this method, the service will be disabled and settings will show that it is turned off.

dispatchGesture
Added in API level 24

public final boolean dispatchGesture (GestureDescription gesture, 
                AccessibilityService.GestureResultCallback callback, 
                Handler handler)
Dispatch a gesture to the touch screen. Any gestures currently in progress, whether from the user, this service, or another service, will be cancelled.

The gesture will be dispatched as if it were performed directly on the screen by a user, so the events may be affected by features such as magnification and explore by touch.

Note: In order to dispatch gestures, your service must declare the capability by setting the R.styleable.AccessibilityService_canPerformGestures property in its meta-data. For more information, see SERVICE_META_DATA.

Since many apps do not appropriately support AccessibilityAction.ACTION_CLICK, if this action fails on an element that should be clickable, a service that is not a screen reader may send a tap directly to the element as a fallback. The example below demonstrates this fallback using the gesture dispatch APIs:



     private void tap(PointF point) {
         StrokeDescription tap =  new StrokeDescription(path(point), 0,
         ViewConfiguration.getTapTimeout());
         GestureDescription.Builder builder = new GestureDescription.Builder();
         builder.addStroke(tap);
         dispatchGesture(builder.build(), null, null);
     }

 
Parameters
gesture	GestureDescription: The gesture to dispatch This value cannot be null.
callback	AccessibilityService.GestureResultCallback: The object to call back when the status of the gesture is known. If null, no status is reported.
handler	Handler: The handler on which to call back the callback object. If null, the object is called back on the service's main thread.
Returns
boolean	true if the gesture is dispatched, false if not.
findFocus
Added in API level 21

public AccessibilityNodeInfo findFocus (int focus)
Find the view that has the specified focus type. The search is performed across all windows.

Note: In order to access the windows your service has to declare the capability to retrieve window content by setting the R.styleable.AccessibilityService_canRetrieveWindowContent property in its meta-data. For details refer to SERVICE_META_DATA. Also the service has to opt-in to retrieve the interactive windows by setting the AccessibilityServiceInfo.FLAG_RETRIEVE_INTERACTIVE_WINDOWS flag. Otherwise, the search will be performed only in the active window.

Note: If the view with AccessibilityNodeInfo.FOCUS_INPUT is on an embedded view hierarchy which is embedded in a SurfaceView via SurfaceView.setChildSurfacePackage(SurfacePackage), there is a limitation that this API won't be able to find the node for the view. It's because views don't know about the embedded hierarchies. Instead, you could traverse all the nodes to find the focus.

Parameters
focus	int: The focus to find. One of AccessibilityNodeInfo.FOCUS_INPUT or AccessibilityNodeInfo.FOCUS_ACCESSIBILITY.
Returns
AccessibilityNodeInfo	The node info of the focused view or null.
See also:

AccessibilityNodeInfo.FOCUS_INPUT
AccessibilityNodeInfo.FOCUS_ACCESSIBILITY
getAccessibilityButtonController
Added in API level 30

public final AccessibilityButtonController getAccessibilityButtonController (int displayId)
Returns the controller of specified logical display for the accessibility button within the system's navigation area. This instance may be used to query the accessibility button's state and register listeners for interactions with and state changes for the accessibility button when AccessibilityServiceInfo.FLAG_REQUEST_ACCESSIBILITY_BUTTON is set.

Note: Not all devices are capable of displaying the accessibility button within a navigation area, and as such, use of this class should be considered only as an optional feature or shortcut on supported device implementations.

Parameters
displayId	int: The logic display id, use Display.DEFAULT_DISPLAY for default display.
Returns
AccessibilityButtonController	the accessibility button controller for this AccessibilityService This value cannot be null.
getAccessibilityButtonController
Added in API level 26

public final AccessibilityButtonController getAccessibilityButtonController ()
Returns the controller for the accessibility button within the system's navigation area. This instance may be used to query the accessibility button's state and register listeners for interactions with and state changes for the accessibility button when AccessibilityServiceInfo.FLAG_REQUEST_ACCESSIBILITY_BUTTON is set.

Note: Not all devices are capable of displaying the accessibility button within a navigation area, and as such, use of this class should be considered only as an optional feature or shortcut on supported device implementations.

Returns
AccessibilityButtonController	the accessibility button controller for this AccessibilityService This value cannot be null.
getBrailleDisplayController
Added in API level 35

public final BrailleDisplayController getBrailleDisplayController ()
Returns the BrailleDisplayController which may be used to communicate with refreshable Braille displays that provide USB or Bluetooth Braille display HID support.

Returns
BrailleDisplayController	This value cannot be null.
getFingerprintGestureController
Added in API level 26

public final FingerprintGestureController getFingerprintGestureController ()
Get the controller for fingerprint gestures. This feature requires AccessibilityServiceInfo.CAPABILITY_CAN_REQUEST_FINGERPRINT_GESTURES. Note: The service must be connected before this method is called.
Requires Manifest.permission.USE_FINGERPRINT

Returns
FingerprintGestureController	The controller for fingerprint gestures, or null if gestures are unavailable.
getInputMethod
Added in API level 33

public final InputMethod getInputMethod ()
Returns the InputMethod instance after the system calls onCreateInputMethod(), which may be used to input text or get editable text selection change notifications. It will return null if the accessibility service doesn't set the AccessibilityServiceInfo.FLAG_INPUT_METHOD_EDITOR flag or the system doesn't call onCreateInputMethod().

Returns
InputMethod	the InputMethod instance
getMagnificationController
Added in API level 24

public final AccessibilityService.MagnificationController getMagnificationController ()
Returns the magnification controller, which may be used to query and modify the state of display magnification.

Note: In order to control magnification, your service must declare the capability by setting the R.styleable.AccessibilityService_canControlMagnification property in its meta-data. For more information, see SERVICE_META_DATA.

Returns
AccessibilityService.MagnificationController	the magnification controller This value cannot be null.
getRootInActiveWindow
Added in API level 16

public AccessibilityNodeInfo getRootInActiveWindow ()
Gets the root node in the currently active window if this service can retrieve window content. The active window is the one that the user is currently touching or the window with input focus, if the user is not touching any window. It could be from any logical display.

Note: In order to access the root node your service has to declare the capability to retrieve window content by setting the R.styleable.AccessibilityService_canRetrieveWindowContent property in its meta-data. For details refer to SERVICE_META_DATA.

Returns
AccessibilityNodeInfo	The root node if this service can retrieve window content.
See also:

for more explanation about the active window.
getRootInActiveWindow
Added in API level 33

public AccessibilityNodeInfo getRootInActiveWindow (int prefetchingStrategy)
Gets the root node in the currently active window if this service can retrieve window content. The active window is the one that the user is currently touching or the window with input focus, if the user is not touching any window. It could be from any logical display.

Parameters
prefetchingStrategy	int: the prefetching strategy. Value is either 0 or a combination of AccessibilityNodeInfo.FLAG_PREFETCH_ANCESTORS, AccessibilityNodeInfo.FLAG_PREFETCH_SIBLINGS, AccessibilityNodeInfo.FLAG_PREFETCH_DESCENDANTS_HYBRID, AccessibilityNodeInfo.FLAG_PREFETCH_DESCENDANTS_DEPTH_FIRST, AccessibilityNodeInfo.FLAG_PREFETCH_DESCENDANTS_BREADTH_FIRST, and AccessibilityNodeInfo.FLAG_PREFETCH_UNINTERRUPTIBLE
Returns
AccessibilityNodeInfo	The root node if this service can retrieve window content. This value may be null.
See also:

getRootInActiveWindow()
for a description of prefetching.
getServiceInfo
Added in API level 16

public final AccessibilityServiceInfo getServiceInfo ()
Gets the an AccessibilityServiceInfo describing this AccessibilityService. This method is useful if one wants to change some of the dynamically configurable properties at runtime.

Returns
AccessibilityServiceInfo	The accessibility service info.
See also:

AccessibilityServiceInfo
getSoftKeyboardController
Added in API level 24

public final AccessibilityService.SoftKeyboardController getSoftKeyboardController ()
Returns the soft keyboard controller, which may be used to query and modify the soft keyboard show mode.

Returns
AccessibilityService.SoftKeyboardController	the soft keyboard controller This value cannot be null.
getSystemActions
Added in API level 30

public final List<AccessibilityNodeInfo.AccessibilityAction> getSystemActions ()
Returns a list of system actions available in the system right now.

System actions that correspond to the global action constants will have matching action IDs. For example, an with id GLOBAL_ACTION_BACK will perform the back action.

These actions should be called by performGlobalAction(int).

Returns
List<AccessibilityNodeInfo.AccessibilityAction>	A list of available system actions. This value cannot be null.
getSystemService
Added in API level 4

public Object getSystemService (String name)
Return the handle to a system-level service by name. The class of the returned object varies by the requested name. Currently available names are:

WINDOW_SERVICE ("window")
The top-level window manager in which you can place custom windows. The returned object is a WindowManager. Must only be obtained from a visual context such as Activity or a Context created with createWindowContext(int, android.os.Bundle), which are adjusted to the configuration and visual bounds of an area on screen.
LAYOUT_INFLATER_SERVICE ("layout_inflater")
A LayoutInflater for inflating layout resources in this context. Must only be obtained from a visual context such as Activity or a Context created with createWindowContext(int, android.os.Bundle), which are adjusted to the configuration and visual bounds of an area on screen.
ACTIVITY_SERVICE ("activity")
A ActivityManager for interacting with the global activity state of the system.
WALLPAPER_SERVICE ("wallpaper")
A WallpaperService for accessing wallpapers in this context. Must only be obtained from a visual context such as Activity or a Context created with createWindowContext(int, android.os.Bundle), which are adjusted to the configuration and visual bounds of an area on screen.
POWER_SERVICE ("power")
A PowerManager for controlling power management.
ALARM_SERVICE ("alarm")
A AlarmManager for receiving intents at the time of your choosing.
NOTIFICATION_SERVICE ("notification")
A NotificationManager for informing the user of background events.
KEYGUARD_SERVICE ("keyguard")
A KeyguardManager for controlling keyguard.
LOCATION_SERVICE ("location")
A LocationManager for controlling location (e.g., GPS) updates.
SEARCH_SERVICE ("search")
A SearchManager for handling search.
VIBRATOR_MANAGER_SERVICE ("vibrator_manager")
A VibratorManager for accessing the device vibrators, interacting with individual ones and playing synchronized effects on multiple vibrators.
VIBRATOR_SERVICE ("vibrator")
A Vibrator for interacting with the vibrator hardware.
CONNECTIVITY_SERVICE ("connectivity")
A ConnectivityManager for handling management of network connections.
IPSEC_SERVICE ("ipsec")
A IpSecManager for managing IPSec on sockets and networks.
WIFI_SERVICE ("wifi")
A WifiManager for management of Wi-Fi connectivity. On releases before Android 7, it should only be obtained from an application context, and not from any other derived context to avoid memory leaks within the calling process.
WIFI_AWARE_SERVICE ("wifiaware")
A WifiAwareManager for management of Wi-Fi Aware discovery and connectivity.
WIFI_P2P_SERVICE ("wifip2p")
A WifiP2pManager for management of Wi-Fi Direct connectivity.
INPUT_METHOD_SERVICE ("input_method")
An InputMethodManager for management of input methods.
UI_MODE_SERVICE ("uimode")
An UiModeManager for controlling UI modes.
DOWNLOAD_SERVICE ("download")
A DownloadManager for requesting HTTP downloads
BATTERY_SERVICE ("batterymanager")
A BatteryManager for managing battery state
JOB_SCHEDULER_SERVICE ("taskmanager")
A JobScheduler for managing scheduled tasks
NETWORK_STATS_SERVICE ("netstats")
A NetworkStatsManager for querying network usage statistics.
HARDWARE_PROPERTIES_SERVICE ("hardware_properties")
A HardwarePropertiesManager for accessing hardware properties.
DOMAIN_VERIFICATION_SERVICE ("domain_verification")
A DomainVerificationManager for accessing web domain approval state.
DISPLAY_HASH_SERVICE ("display_hash")
A DisplayHashManager for management of display hashes.
ERROR(/#AUTHENTICATION_POLICY_SERVICE) ("authentication_policy")
A ERROR(/android.security.authenticationpolicy.AuthenticationPolicyManager) for managing authentication related policies on the device.
Note: System services obtained via this API may be closely associated with the Context in which they are obtained from. In general, do not share the service objects between various different contexts (Activities, Applications, Services, Providers, etc.)

Note: Instant apps, for which PackageManager.isInstantApp() returns true, don't have access to the following system services: DEVICE_POLICY_SERVICE, FINGERPRINT_SERVICE, KEYGUARD_SERVICE, SHORTCUT_SERVICE, USB_SERVICE, WALLPAPER_SERVICE, WIFI_P2P_SERVICE, WIFI_SERVICE, WIFI_AWARE_SERVICE. For these services this method will return null. Generally, if you are running as an instant app you should always check whether the result of this method is null.

Note: When implementing this method, keep in mind that new services can be added on newer Android releases, so if you're looking for just the explicit names mentioned above, make sure to return null when you don't recognize the name — if you throw a RuntimeException exception instead, your app might break on new Android releases.

Parameters
name	String: Value is Context.POWER_SERVICE, Context.WINDOW_SERVICE, Context.LAYOUT_INFLATER_SERVICE, Context.ACCOUNT_SERVICE, Context.ACTIVITY_SERVICE, Context.ALARM_SERVICE, Context.NOTIFICATION_SERVICE, Context.ACCESSIBILITY_SERVICE, Context.CAPTIONING_SERVICE, Context.KEYGUARD_SERVICE, Context.LOCATION_SERVICE, Context.HEALTHCONNECT_SERVICE, Context.SEARCH_SERVICE, Context.SENSOR_SERVICE, android.content.Context.SENSOR_PRIVACY_SERVICE, Context.STORAGE_SERVICE, Context.STORAGE_STATS_SERVICE, Context.WALLPAPER_SERVICE, Context.VIBRATOR_MANAGER_SERVICE, Context.VIBRATOR_SERVICE, android.content.Context.THREAD_NETWORK_SERVICE, Context.CONNECTIVITY_SERVICE, Context.TETHERING_SERVICE, android.content.Context.PAC_PROXY_SERVICE, android.content.Context.VCN_MANAGEMENT_SERVICE, Context.IPSEC_SERVICE, Context.VPN_MANAGEMENT_SERVICE, android.content.Context.TEST_NETWORK_SERVICE, Context.NETWORK_STATS_SERVICE, Context.WIFI_SERVICE, Context.WIFI_AWARE_SERVICE, Context.WIFI_P2P_SERVICE, android.content.Context.WIFI_SCANNING_SERVICE, Context.WIFI_RTT_RANGING_SERVICE, android.content.Context.WIFI_USD_SERVICE, Context.NSD_SERVICE, Context.AUDIO_SERVICE, android.content.Context.AUDIO_DEVICE_VOLUME_SERVICE, android.content.Context.AUTH_SERVICE, Context.FINGERPRINT_SERVICE, Context.BIOMETRIC_SERVICE, android.content.Context.AUTHENTICATION_POLICY_SERVICE, Context.MEDIA_ROUTER_SERVICE, Context.TELEPHONY_SERVICE, Context.TELEPHONY_SUBSCRIPTION_SERVICE, Context.TELEPHONY_PHONE_NUMBER_SERVICE, Context.CARRIER_CONFIG_SERVICE, Context.EUICC_SERVICE, Context.TELECOM_SERVICE, Context.CLIPBOARD_SERVICE, Context.INPUT_METHOD_SERVICE, Context.TEXT_SERVICES_MANAGER_SERVICE, Context.TEXT_CLASSIFICATION_SERVICE, Context.APPWIDGET_SERVICE, android.content.Context.REBOOT_READINESS_SERVICE, android.content.Context.ROLLBACK_SERVICE, Context.DROPBOX_SERVICE, Context.DEVICE_POLICY_SERVICE, Context.UI_MODE_SERVICE, Context.DOWNLOAD_SERVICE, Context.NFC_SERVICE, Context.BLUETOOTH_SERVICE, Context.USB_SERVICE, Context.LAUNCHER_APPS_SERVICE, android.content.Context.SERIAL_SERVICE, Context.INPUT_SERVICE, Context.DISPLAY_SERVICE, Context.USER_SERVICE, Context.RESTRICTIONS_SERVICE, Context.APP_OPS_SERVICE, Context.ROLE_SERVICE, Context.CAMERA_SERVICE, Context.PRINT_SERVICE, Context.CONSUMER_IR_SERVICE, Context.TV_INTERACTIVE_APP_SERVICE, Context.TV_INPUT_SERVICE, Context.USAGE_STATS_SERVICE, Context.MEDIA_SESSION_SERVICE, Context.MEDIA_COMMUNICATION_SERVICE, Context.BATTERY_SERVICE, Context.JOB_SCHEDULER_SERVICE, Context.PERSISTENT_DATA_BLOCK_SERVICE, Context.MEDIA_PROJECTION_SERVICE, Context.MIDI_SERVICE, android.content.Context.RADIO_SERVICE, Context.HARDWARE_PROPERTIES_SERVICE, Context.SHORTCUT_SERVICE, Context.SYSTEM_HEALTH_SERVICE, Context.COMPANION_DEVICE_SERVICE, Context.VIRTUAL_DEVICE_SERVICE, Context.CROSS_PROFILE_APPS_SERVICE, android.content.Context.PERMISSION_SERVICE, android.content.Context.LIGHTS_SERVICE, Context.LOCALE_SERVICE, android.content.Context.UWB_SERVICE, Context.MEDIA_METRICS_SERVICE, Context.DISPLAY_HASH_SERVICE, Context.CREDENTIAL_SERVICE, Context.DEVICE_LOCK_SERVICE, android.content.Context.VIRTUALIZATION_SERVICE, Context.GRAMMATICAL_INFLECTION_SERVICE, Context.SECURITY_STATE_SERVICE, Context.CONTACT_KEYS_SERVICE, android.content.Context.RANGING_SERVICE, Context.MEDIA_QUALITY_SERVICE, Context.ADVANCED_PROTECTION_SERVICE, or android.content.Context.ANOMALY_DETECTOR_SERVICE This value cannot be null.
Returns
Object	The service or null if the name does not exist.
getTouchInteractionController
Added in API level 33

public final TouchInteractionController getTouchInteractionController (int displayId)
Returns the touch interaction controller for the specified logical display, which may be used to detect gestures and otherwise control touch interactions. If AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is disabled the controller's methods will have no effect.

Parameters
displayId	int: The logical display id, use Display.DEFAULT_DISPLAY for default display.
Returns
TouchInteractionController	the TouchExploration controller This value cannot be null.
getWindows
Added in API level 21

public List<AccessibilityWindowInfo> getWindows ()
Gets the windows on the screen of the default display. This method returns only the windows that a sighted user can interact with, as opposed to all windows. For example, if there is a modal dialog shown and the user cannot touch anything behind it, then only the modal window will be reported (assuming it is the top one). For convenience the returned windows are ordered in a descending layer order, which is the windows that are on top are reported first. Since the user can always interact with the window that has input focus by typing, the focused window is always returned (even if covered by a modal window).

Note: In order to access the windows your service has to declare the capability to retrieve window content by setting the R.styleable.AccessibilityService_canRetrieveWindowContent property in its meta-data. For details refer to SERVICE_META_DATA. Also the service has to opt-in to retrieve the interactive windows by setting the AccessibilityServiceInfo.FLAG_RETRIEVE_INTERACTIVE_WINDOWS flag.

Returns
List<AccessibilityWindowInfo>	The windows if there are windows and the service is can retrieve them, otherwise an empty list.
getWindowsOnAllDisplays
Added in API level 30

public final SparseArray<List<AccessibilityWindowInfo>> getWindowsOnAllDisplays ()
Gets the windows on the screen of all displays. This method returns only the windows that a sighted user can interact with, as opposed to all windows. For example, if there is a modal dialog shown and the user cannot touch anything behind it, then only the modal window will be reported (assuming it is the top one). For convenience the returned windows are ordered in a descending layer order, which is the windows that are on top are reported first. Since the user can always interact with the window that has input focus by typing, the focused window is always returned (even if covered by a modal window).

Note: In order to access the windows your service has to declare the capability to retrieve window content by setting the R.styleable.AccessibilityService_canRetrieveWindowContent property in its meta-data. For details refer to SERVICE_META_DATA. Also the service has to opt-in to retrieve the interactive windows by setting the AccessibilityServiceInfo.FLAG_RETRIEVE_INTERACTIVE_WINDOWS flag.

Returns
SparseArray<List<AccessibilityWindowInfo>>	The windows of all displays if there are windows and the service is can retrieve them, otherwise an empty list. The key of SparseArray is display ID. This value cannot be null.
isCacheEnabled
Added in API level 33

public boolean isCacheEnabled ()
Returns true if the cache is enabled.

Returns
boolean	
isNodeInCache
Added in API level 33

public boolean isNodeInCache (AccessibilityNodeInfo node)
Checks if node is in the cache.

Parameters
node	AccessibilityNodeInfo: the node to check. This value cannot be null.
Returns
boolean	true if node is in the cache.
onAccessibilityEvent
Added in API level 4

public abstract void onAccessibilityEvent (AccessibilityEvent event)
Callback for AccessibilityEvents.

Parameters
event	AccessibilityEvent: The new event. This event is owned by the caller and cannot be used after this method returns. Services wishing to use the event after this method returns should make a copy.
onBind
Added in API level 4

public final IBinder onBind (Intent intent)
Implement to return the implementation of the internal accessibility service interface.

Parameters
intent	Intent: The Intent that was used to bind to this service, as given to Context.bindService. Note that any extras that were included with the Intent at that point will not be seen here.
Returns
IBinder	Return an IBinder through which clients can call on to the service.
onCreateInputMethod
Added in API level 33

public InputMethod onCreateInputMethod ()
The default implementation returns our default InputMethod. Subclasses can override it to provide their own customized version. Accessibility services need to set the AccessibilityServiceInfo.FLAG_INPUT_METHOD_EDITOR flag to use input method APIs.

Returns
InputMethod	the InputMethod. This value cannot be null.
onGesture
Added in API level 30

public boolean onGesture (AccessibilityGestureEvent gestureEvent)
Called by the system when the user performs a specific gesture on the specific touch screen.

Note: To receive gestures an accessibility service must request that the device is in touch exploration mode by setting the AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE flag.

Note: The default implementation calls onGesture(int) when the touch screen is default display.

Parameters
gestureEvent	AccessibilityGestureEvent: The information of gesture. This value cannot be null.
Returns
boolean	Whether the gesture was handled.
onInterrupt
Added in API level 4

public abstract void onInterrupt ()
Callback for interrupting the accessibility feedback.

onMotionEvent
Added in API level 34

public void onMotionEvent (MotionEvent event)
Callback that allows an accessibility service to observe generic MotionEvents.

Prefer TouchInteractionController to observe and control touchscreen events, including touch gestures. If this or any enabled service is using AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE then onMotionEvent(MotionEvent) will not receive touchscreen events.

Note: The service must first request to listen to events using AccessibilityServiceInfo.setMotionEventSources. MotionEvents from sources in AccessibilityServiceInfo.getMotionEventSources() are not sent to the rest of the system. To stop listening to events from a given source, call AccessibilityServiceInfo.setMotionEventSources with that source removed.

Parameters
event	MotionEvent: The event to be processed. This value cannot be null.
onSystemActionsChanged
Added in API level 30

public void onSystemActionsChanged ()
This is called when the system action list is changed.

performGlobalAction
Added in API level 16

public final boolean performGlobalAction (int action)
Performs a global action. Such an action can be performed at any moment regardless of the current application or user location in that application. For example going back, going home, opening recents, etc.

Note: The global action ids themselves give no information about the current availability of their corresponding actions. To determine if a global action is available, use getSystemActions()

Parameters
action	int: The action to perform.
Returns
boolean	Whether the action was successfully performed. Perform actions using ids like the id constants referenced below:
See also:

GLOBAL_ACTION_BACK
GLOBAL_ACTION_HOME
GLOBAL_ACTION_NOTIFICATIONS
GLOBAL_ACTION_RECENTS
GLOBAL_ACTION_DPAD_UP
GLOBAL_ACTION_DPAD_DOWN
GLOBAL_ACTION_DPAD_LEFT
GLOBAL_ACTION_DPAD_RIGHT
GLOBAL_ACTION_DPAD_CENTER
setAccessibilityFocusAppearance
Added in API level 31

public void setAccessibilityFocusAppearance (int strokeWidth, 
                int color)
Sets the strokeWidth and color of the accessibility focus rectangle.

Note: This setting persists until this or another active AccessibilityService changes it or the device reboots.

Parameters
strokeWidth	int: The stroke width of the rectangle in pixels. Setting this value to zero results in no focus rectangle being drawn.
color	int: The color of the rectangle.
setAnimationScale
Added in API level 33

public void setAnimationScale (float scale)
Sets the system settings values that control the scaling factor for animations. The scale controls the animation playback speed for animations that respect these settings. Animations that do not respect the settings values will not be affected by this function. A lower scale value results in a faster speed. A value of 0 disables animations entirely. When animations are disabled services receive window change events more quickly which can reduce the potential by confusion by reducing the time during which windows are in transition.

Parameters
scale	float: The scaling factor for all animations.
See also:

AccessibilityEvent.TYPE_WINDOWS_CHANGED
AccessibilityEvent.TYPE_WINDOW_STATE_CHANGED
Settings.Global.WINDOW_ANIMATION_SCALE
Settings.Global.TRANSITION_ANIMATION_SCALE
Settings.Global.ANIMATOR_DURATION_SCALE
setCacheEnabled
Added in API level 33

public boolean setCacheEnabled (boolean enabled)
Sets the cache status.

If enabled, enable the cache and prefetching. Otherwise, disable the cache and prefetching. Note: By default the cache is enabled.

Parameters
enabled	boolean: whether to enable or disable the cache.
Returns
boolean	true if the cache and connection are not null, so the cache status is set.
setGestureDetectionPassthroughRegion
Added in API level 30

public void setGestureDetectionPassthroughRegion (int displayId, 
                Region region)
When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is enabled, this function requests that touch interactions starting in the specified region of the screen bypass the gesture detector. There can only be one gesture detection passthrough region per display. Requesting a new gesture detection passthrough region clears the existing one. To disable this passthrough and return to the original behavior, pass in an empty region. When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is disabled this function has no effect.

Parameters
displayId	int: The display on which to set this region.
region	Region: the region of the screen. This value cannot be null.
setServiceInfo
Added in API level 4

public final void setServiceInfo (AccessibilityServiceInfo info)
Sets the AccessibilityServiceInfo that describes this service.

Note: You can call this method any time but the info will be picked up after the system has bound to this service and when this method is called thereafter.

Parameters
info	AccessibilityServiceInfo: The info.
setTouchExplorationPassthroughRegion
Added in API level 30

public void setTouchExplorationPassthroughRegion (int displayId, 
                Region region)
When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is enabled, this function requests that touch interactions starting in the specified region of the screen bypass the touch explorer and go straight to the view hierarchy. There can only be one touch exploration passthrough region per display. Requesting a new touch explorationpassthrough region clears the existing one. To disable this passthrough and return to the original behavior, pass in an empty region. When AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE is disabled this function has no effect.

Parameters
displayId	int: The display on which to set this region.
region	Region: the region of the screen . This value cannot be null.
takeScreenshot
Added in API level 30

public void takeScreenshot (int displayId, 
                Executor executor, 
                AccessibilityService.TakeScreenshotCallback callback)
Takes a screenshot of the specified display and returns it via an AccessibilityService.ScreenshotResult. You can use Bitmap.wrapHardwareBuffer to construct the bitmap from the ScreenshotResult's payload.

Note: In order to take screenshot your service has to declare the capability to take screenshot by setting the R.styleable.AccessibilityService_canTakeScreenshot property in its meta-data. For details refer to SERVICE_META_DATA.

Parameters
displayId	int: The logic display id, must be Display.DEFAULT_DISPLAY for default display.
executor	Executor: Executor on which to run the callback. This value cannot be null. Callback and listener events are dispatched through this Executor, providing an easy way to control which thread is used. To dispatch events through the main thread of your application, you can use Context.getMainExecutor(). Otherwise, provide an Executor that dispatches to an appropriate thread.
callback	AccessibilityService.TakeScreenshotCallback: The callback invoked when taking screenshot has succeeded or failed. See TakeScreenshotCallback for details. This value cannot be null.
See also:

takeScreenshotOfWindow(int, Executor, TakeScreenshotCallback)
takeScreenshotOfWindow
Added in API level 34

public void takeScreenshotOfWindow (int accessibilityWindowId, 
                Executor executor, 
                AccessibilityService.TakeScreenshotCallback callback)
Takes a screenshot of the specified window and returns it via an AccessibilityService.ScreenshotResult. You can use Bitmap.wrapHardwareBuffer to construct the bitmap from the ScreenshotResult's payload.

Note: In order to take screenshots your service has to declare the capability to take screenshot by setting the R.styleable.AccessibilityService_canTakeScreenshot property in its meta-data. For details refer to SERVICE_META_DATA.

Both this method and takeScreenshot(int, Executor, TakeScreenshotCallback) can be used for machine learning-based visual screen understanding. Use takeScreenshotOfWindow if your target window might be visually underneath an accessibility overlay (from your or another accessibility service) in order to capture the window contents without the screenshot being covered by the overlay contents drawn on the screen.

Parameters
accessibilityWindowId	int: The window id, from AccessibilityWindowInfo.getId().
executor	Executor: Executor on which to run the callback. This value cannot be null. Callback and listener events are dispatched through this Executor, providing an easy way to control which thread is used. To dispatch events through the main thread of your application, you can use Context.getMainExecutor(). Otherwise, provide an Executor that dispatches to an appropriate thread.
callback	AccessibilityService.TakeScreenshotCallback: The callback invoked when taking screenshot has succeeded or failed. See TakeScreenshotCallback for details. This value cannot be null.
See also:

takeScreenshot(int, Executor, TakeScreenshotCallback)
Protected methods
onGesture
Added in API level 16
Deprecated in API level 30

protected boolean onGesture (int gestureId)

This method was deprecated in API level 30.
Override onGesture(android.accessibilityservice.AccessibilityGestureEvent) instead.

Called by onGesture(android.accessibilityservice.AccessibilityGestureEvent) when the user performs a specific gesture on the default display. Note: To receive gestures an accessibility service must request that the device is in touch exploration mode by setting the AccessibilityServiceInfo.FLAG_REQUEST_TOUCH_EXPLORATION_MODE flag.

Parameters
gestureId	int: The unique id of the performed gesture.
Returns
boolean	Whether the gesture was handled.
See also:

GESTURE_SWIPE_UP
GESTURE_SWIPE_UP_AND_LEFT
GESTURE_SWIPE_UP_AND_DOWN
GESTURE_SWIPE_UP_AND_RIGHT
GESTURE_SWIPE_DOWN
GESTURE_SWIPE_DOWN_AND_LEFT
GESTURE_SWIPE_DOWN_AND_UP
GESTURE_SWIPE_DOWN_AND_RIGHT
GESTURE_SWIPE_LEFT
GESTURE_SWIPE_LEFT_AND_UP
GESTURE_SWIPE_LEFT_AND_RIGHT
GESTURE_SWIPE_LEFT_AND_DOWN
GESTURE_SWIPE_RIGHT
GESTURE_SWIPE_RIGHT_AND_UP
GESTURE_SWIPE_RIGHT_AND_LEFT
GESTURE_SWIPE_RIGHT_AND_DOWN
onKeyEvent
Added in API level 18

protected boolean onKeyEvent (KeyEvent event)
Callback that allows an accessibility service to observe the key events before they are passed to the rest of the system. This means that the events are first delivered here before they are passed to the device policy, the input method, or applications.

Note: It is important that key events are handled in such a way that the event stream that would be passed to the rest of the system is well-formed. For example, handling the down event but not the up event and vice versa would generate an inconsistent event stream.

Note: The key events delivered in this method are copies and modifying them will have no effect on the events that will be passed to the system. This method is intended to perform purely filtering functionality.

Parameters
event	KeyEvent: The event to be processed. This event is owned by the caller and cannot be used after this method returns. Services wishing to use the event after this method returns should make a copy.
Returns
boolean	If true then the event will be consumed and not delivered to applications, otherwise it will be delivered as usual.
onServiceConnected
Added in API level 4

protected void onServiceConnected ()
This method is a part of the AccessibilityService lifecycle and is called after the system has successfully bound to the service. If is convenient to use this method for setting the AccessibilityServiceInfo.

See also:

AccessibilityServiceInfo
setServiceInfo(AccessibilityServiceInfo)